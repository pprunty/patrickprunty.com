import { SITE_URL, AUTHOR } from '@/config';

export const metadata = {
  title: 'Interactive Animation Development with Manim',
  description: 'Discover how to set up an interactive editing environment with Manim to create sleek, professional animations for illustrating mathematical concepts.',
  image: '/images/interactive-animation-development-with-manim/manim.png',
  date: '2025-01-02',
  author: 'Patrick Prunty',
  authorUrl: 'https://patrickprunty.com/about',
  openGraph: {
    title: 'Interactive Animation Development with Manim',
    description: 'Discover how to set up an interactive editing environment with Manim to create sleek, professional animations for illustrating mathematical concepts.',
    url: '/blog/interactive-animation-development-with-manim',
    images: [
      {
        url: `/images/interactive-animation-development-with-manim/manim.png`,
        alt: 'Interactive Animation Development with Manim'
      }
    ],
    type: 'article',
    tags: [
      'mathematics',
      'programming',
      'manim',
      'content creation',
      'animation',
      'software development',
      'python'
    ]
  },
  twitter: {
    card: 'summary_large_image',
    title: 'Interactive Animation Development with Manim',
    description: 'Discover how to set up an interactive editing environment with Manim to create sleek, professional animations for illustrating mathematical concepts.',
    image: `/images/interactive-animation-development-with-manim/manim.png`
  },
  keywords: [
    'mathematics',
    'programming',
    'manim',
    'content creation',
    'animation',
    'software development',
    'python'
  ],
  slug: 'interactive-animation-development-with-manim',
  readingTime: 8,
  draft: true
};

This is a guide on how to setup an interactive animation environment using [Manim](), the open 
source python library for mathematical animations, developed and used by [Grant Sanderson]() for his work on YouTube channel [3blue1brown]().

By the end of this guide you will have the ability to create animations like this 
through Python:

<MP4
  src="/videos/sample-video.mp4"
  controls
  autoplay
  loop
  muted
  className="rounded-md shadow-lg"
/>

Using an interactive animation developement environment like this:

<MP4
  src="/videos/sample-video.mp4"
    controls
    autoplay
    loop
    muted
  className="rounded-md shadow-lg"
/>

Why am I doing this? I have a background in [tutoring math/CS and in arts](/) and [this year's new 
year resolution](/blog/2024-in-review#new-year-resolution) includes creating educational content for a YouTube channel where I plan to use 
Manim to create visuals for.


The library was specifically created for detailing mathematical concepts in a visually 
artistic way, however, it can also be used as a general animation engine for developers 
with experience in Python prefer a smaller learning curve compared to Adobe, or ...

# Pre-requisites [#pre-requisites]

1. [Sublime Text Editor](https://www.sublimetext.com/)
2. [brew](https://brew.sh/)
3. [GitHub account](https://github.com/)

# Sublime Text Editor Setup [#sublime-text-editor]

## Adding Terminus [#adding terminus]

Open your project using sublime text editor. Now hold cmd + shift + p to open command pallette, search 
for install package and select that, then search "Terminus".

## Key Bindings [#key-bindings]

```json
[
   {
       "keys": ["ctrl+1"],
       "command": "terminus_open",
       "args": {
           "cmd": ["bash", "-i", "-l"],  // Start Bash as an interactive login shell
           "cwd": "${file_path:${folder}}",  // Set working directory
           "panel_name": "Terminus"
       }
   }
]

```

## Command Pallette [#command-paletee]

```json
[
   {
        "caption": "Terminal (panel)",
        "command": "terminus_open",
        "args": {
           "cmd": ["bash", "-i", "-l", "&&", "source ~/.bash_profile"],  // Start Bash as an interactive login shell
           "cwd": "${file_path:${folder}}",  // Set the current working directory
           "title": "Bash Terminal",        // Optional: Update the title
           "panel_name": "Terminus"
        }
   }
]
```

# Installing Python [#installing-python]

<Admonition type="info" title="Info">
  If you already have Python version 3.12 installed on your system, you may skip to [Manim Installation](/blog/interactive-animation-development-with-manim#manim-installation)
</Admonition>

The easiest way to manage your python environments is via `pyenv`:

```
brew install pyenv
```

Now add `pyenv` to your bash profile:

```
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bash_profile
echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bash_profile
echo 'eval "$(pyenv init --path)"' >> ~/.bash_profile
source ~/.bash_profile
```

Once installed, install python version 3.12 and install it as your 
global python version:

```bash
pyenv install 3.12 && pyenv global 3.12
```

Validate the global version of python that you're running:

```bash
python --version
```

# Manim Installation [#manim-installation]

There are two known Manim libraries that you can use to create animations:

1. [Manim Community Edition (CE)](https://github.com/ManimCommunity/manim) (community managed manim library)
2. [Manim GL](https://github.com/3b1b/manim) (managed by 3b1b team)

<Admonition type="info" title="Info">
The community edition is the more stable and recommended package to download, however,
this edition does not prioritize the interactive editing environment that the 3b1b team does.
If your priority is to create a workflow wherein you can create and edit animation interactively,
which is where I believe the real value in this software lies, then start by forking the `3b1b/manim` repository on GitHub:
</Admonition>

## Installing Manim GL [#installing-manim-gl]

Begin by creating a directory on your machine where you will store:

1. The `manimlib` forked from `3b1b/manim`
2. Your projects

To do this, run `mkdir <project_name>`

Then, navigate to [https://github.com/3b1b/manim](https://github.com/3b1b/manim) and fork the repository.
Then clone your forked repository to your local machine:

```bash
git clone https://github.com/<your_username>/<your_manim_lib_name>.git
```

In the root of the project, install the library:

```bash
pip install -e .
```

Before installing Manim GL, there are a couple of pre-requisites needed on your Mac:

* `ffmpeg` - for video processing
* `mactex` - for LaTeX rendering

You can install both of these using `brew`:

```bash
brew install ffmpeg mactex
```

Whilst they are installing, navigate to [https://github.com/3b1b/manim](https://github.com/3b1b/manim) and fork the repository.
Then clone your forked repository to your local machine:

```bash
git clone https://github.com/<your_username>/<your_manim_lib_name>.git
```

In the root of the project, install the library:

```bash
pip install -e .
```

This will install the library in "editable" mode, meaning you can make changes to the library and see them reflected
in your animations.

Additionally, you are required to install `setuptools` or else you'll run into issues running the `manimgl` command:

```bash
pip install setuptools
```

Now the `manimgl` command will be available globally on your machine and you're all set to start running animations.

To validate this, run:

```bash
manimgl --help
```

# Running Your First Animation [#first-animation]

Let's start with a very basic animation and build on this. Create a file `my_first_animation.py` and copy and paste this code:

```python
from manimlib import *


class MyFirstAnimation(Scene):
    def construct(self):
        text = Text("Hello, Manim!")
        self.play(Write(text))
        self.wait(2)
```

To run this animation, run:

```bash
manimgl my_first_animation.py MyFirstAnimation
```

highlight the `def construct` part of your scene, press cmd + shift + r, it'll open terminal with your animation 
running.

highlight block/chunk of text fully without commands and hit cmd + r



# Running Interactive Animations [#running-interactive-animations]

## The Example Scene [#the-example-scene]

To run the example animation scene provided by manim, you can use the `manimgl` command. Run the following in
the root of the manim library you cloned:

```bash
manimgl example_scenes.py OpeningManimExample
```

This will open an interactive window with the example animation.

You can interact with the animation using your mouse and keys:

* scroll the middle mouse button to move the screen up and down
* hold down the **z** on the keyboard while scrolling to zoom the screen
* hold down the **d** key on the keyboard and move the mouse to change the three-dimensional perspective.

Press **r** to reset scroll position, or **âŒ˜** + **q** to close the window.

## Running Animations with `manimgl` cli

To run a scene, you will use the following command:

```bash
manimgl <code>.py <Scene> <flags>
```

Here are some flags you will use most commonly:

- `-w/--write_file`: Will write your animation video to an output directory configured in `custom_config.py`'s `directories.base`
- `-l/--low_quality`: Render at low quality (for fast rendering) 
- `--uhd`: Render at 4K quality
- `-f/--full_screen`: Render at full screen
- `-p/--presenter_mode`: Scene will stay paused during wait calls until space bar or right arrow is hit, like a slide show
- `-e/--embed`: Creates a new file where the line self.embed is inserted into the Scenes construct method. If a string is passed in, the line will be inserted below the last line of code including that string.
- `--fps`: Frame rate, as an integer

For a full list, you can go [here](https://3b1b.github.io/manim/getting_started/configuration.html).




# Interactive Animation [#interactive-animation-projects]

To create interactive animations, wherein you can "add" frames at the end of the animation 
you are creating, you can do it two ways:

1. Using the `--embed` flag
2. Using `self.embed()` at the end of your `Scene` class

For example, take this scene:

```python
class InteractiveDevelopment(Scene):
    def construct(self):
        circle = Circle()
        circle.set_fill(BLUE, opacity=0.5)
        circle.set_stroke(BLUE_E, width=4)
        square = Square()

        self.play(ShowCreation(square))
        self.wait()

        # This opens an iPython terminal where you can keep writing
        # lines as if they were part of this construct method.
        # In particular, 'square', 'circle' and 'self' will all be
        # part of the local namespace in that terminal.
        self.embed()
```

Alternatively, without `self.embed()`, you can run the scene in interactive mode using:

```bash
manimgl example_scenes.py InteractiveDevelopement -e <line_number>
```

This enables you to input additional commands into the iPython terminal to add new animations 
to your scene.

## Structuring a Project [#structuring-a-project]


Now, if you're planning on using manim *seriously* then we need to talk about how to manage projects and create
workflows within them.

Project Structure:

```bash
manim/
â”œâ”€â”€ manimlib/
â”‚   â”œâ”€â”€ animation/
â”‚   â”œâ”€â”€ ...
â”‚   â”œâ”€â”€ default_config.yml
â”‚   â””â”€â”€ window.py
â”œâ”€â”€ project/
â”‚   â”œâ”€â”€ code.py
â”‚   â””â”€â”€ custom_config.yml
â””â”€â”€ custom_config.yml <- Your custom config
```

# Note on Hacking the Manim library [#hacking-the-manim-library]

Since the Manim version forked is not a community managed edition of the library, there may be issues. You can 
try to fix these bugs, or add new features to your forked version by editing 
the content of the python files in the `manimlib` directory. To validate your changes
worked, you need to install your new version in a seperate venv and use this cli...

add instructions on how to install local manim version in venv, use the manimgl cli from that venv to test changes 
against your animation code. 

# Updating Your Forked Manim Edition [#updating-fork]

# Resources

The Manim Community [tutorial and guides section](https://docs.manim.community/en/stable/tutorials/quickstart.html), however, is extremely useful for getting started with creating complex
animations.
[https://3b1b.github.io/manim/getting_started/example_scenes.html](https://3b1b.github.io/manim/getting_started/example_scenes.html)
